<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generar Examen - Asistente IA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body class="bg-gray-100">
    <!-- Header -->
    <header class="bg-white shadow-sm p-4 flex justify-between items-center">
        <div class="flex items-center">
            <i class="fas fa-brain text-2xl text-blue-600 mr-2"></i>
            <h1 class="text-xl font-bold text-gray-800">Asistente de Exámenes IA</h1>
        </div>
        <div class="flex items-center space-x-4">
            <a href="index.html" class="text-blue-600 hover:text-blue-800 flex items-center">
                <i class="fas fa-arrow-left mr-2"></i>
                <span>Volver al Dashboard</span>
            </a>
            <div class="flex items-center">
                <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80" 
                     alt="Usuario" class="w-8 h-8 rounded-full">
                <span class="ml-2 text-gray-700">Prof. Miguel Fernando</span>
            </div>
        </div>
    </header>

    <!-- Contenido principal -->
    <main class="container mx-auto p-6">
        <div class="bg-white rounded-xl shadow-md p-6 mb-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-2">Generador de Exámenes con IA</h2>
            <p class="text-gray-600">Crea evaluaciones personalizadas adaptadas al nivel y necesidades de tus estudiantes.</p>
        </div>

        <!-- Configuración del examen -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Panel de configuración -->
            <div class="lg:col-span-1">
                <div class="bg-white rounded-xl shadow-md p-6 sticky top-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Configuración del Examen</h3>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-gray-700 text-sm font-medium mb-2" for="examSubject">
                                Asignatura
                            </label>
                            <select id="examSubject" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">Seleccionar asignatura</option>
                                <option value="matematicas">Matemáticas</option>
                                <option value="ciencias">Ciencias</option>
                                <option value="historia">Historia</option>
                                <option value="lenguaje">Lenguaje</option>
                                <option value="programacion">Programación</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 text-sm font-medium mb-2" for="examTopics">
                                Temas a evaluar
                            </label>
                            <div class="space-y-2 max-h-40 overflow-y-auto p-2 border border-gray-300 rounded-lg">
                                <div class="flex items-center">
                                    <input type="checkbox" id="topic1" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                    <label for="topic1" class="ml-2 text-sm text-gray-700">Álgebra básica</label>
                                </div>
                                <div class="flex items-center">
                                    <input type="checkbox" id="topic2" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                    <label for="topic2" class="ml-2 text-sm text-gray-700">Geometría</label>
                                </div>
                                <div class="flex items-center">
                                    <input type="checkbox" id="topic3" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                    <label for="topic3" class="ml-2 text-sm text-gray-700">Cálculo diferencial</label>
                                </div>
                                <div class="flex items-center">
                                    <input type="checkbox" id="topic4" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                    <label for="topic4" class="ml-2 text-sm text-gray-700">Estadística</label>
                                </div>
                                <div class="flex items-center">
                                    <input type="checkbox" id="topic5" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                    <label for="topic5" class="ml-2 text-sm text-gray-700">Trigonometría</label>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 text-sm font-medium mb-2" for="difficultyLevel">
                                Nivel de Dificultad
                            </label>
                            <select id="difficultyLevel" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="mixed">Mixto (automático)</option>
                                <option value="basic">Básico</option>
                                <option value="intermediate">Intermedio</option>
                                <option value="advanced">Avanzado</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 text-sm font-medium mb-2" for="questionCount">
                                Número de Preguntas
                            </label>
                            <input type="number" id="questionCount" min="5" max="50" value="15" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 text-sm font-medium mb-2" for="examDuration">
                                Duración (minutos)
                            </label>
                            <input type="number" id="examDuration" min="10" max="180" value="60" class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        
                        <div>
                            <label class="block text-gray-700 text-sm font-medium mb-2" for="questionTypes">
                                Tipos de Preguntas
                            </label>
                            <div class="space-y-2">
                                <div class="flex items-center">
                                    <input type="checkbox" id="typeMultiple" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" checked>
                                    <label for="typeMultiple" class="ml-2 text-sm text-gray-700">Selección múltiple</label>
                                </div>
                                <div class="flex items-center">
                                    <input type="checkbox" id="typeTrueFalse" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" checked>
                                    <label for="typeTrueFalse" class="ml-2 text-sm text-gray-700">Verdadero/Falso</label>
                                </div>
                                <div class="flex items-center">
                                    <input type="checkbox" id="typeShortAnswer" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                                    <label for="typeShortAnswer" class="ml-2 text-sm text-gray-700">Respuesta corta</label>
                                </div>
                            </div>
                        </div>
                        
                        <div class="pt-4">
                            <button id="generateExamBtn" class="w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 font-medium flex items-center justify-center">
                                <i class="fas fa-robot mr-2"></i>
                                Generar Examen con IA
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Vista previa del examen -->
            <div class="lg:col-span-2">
                <div class="bg-white rounded-xl shadow-md p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-lg font-semibold text-gray-800">Vista Previa del Examen</h3>
                        <div class="flex space-x-2">
                            <button id="saveExamBtn" class="bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center">
                                <i class="fas fa-save mr-2"></i>
                                Guardar Examen
                            </button>
                            <button id="exportExamBtn" class="bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center">
                                <i class="fas fa-download mr-2"></i>
                                Exportar PDF
                            </button>
                        </div>
                    </div>
                    
                    <div id="examPreview" class="space-y-6">
                        <!-- Encabezado del examen -->
                        <div class="border-b border-gray-200 pb-4">
                            <h2 class="text-2xl font-bold text-center text-gray-800 mb-2">Examen de Matemáticas</h2>
                            <div class="flex justify-between text-sm text-gray-600">
                                <div>
                                    <p><strong>Estudiante:</strong> _________________________</p>
                                    <p><strong>Fecha:</strong> _________________________</p>
                                </div>
                                <div class="text-right">
                                    <p><strong>Duración:</strong> 60 minutos</p>
                                    <p><strong>Puntuación:</strong> _______ / 100</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Instrucciones -->
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <h3 class="font-semibold text-blue-800 mb-2">Instrucciones:</h3>
                            <ul class="list-disc list-inside text-blue-700 text-sm space-y-1">
                                <li>Lee cada pregunta cuidadosamente antes de responder.</li>
                                <li>Marca solo una respuesta en preguntas de selección múltiple.</li>
                                <li>No se permite el uso de calculadora en esta evaluación.</li>
                                <li>Tienes 60 minutos para completar el examen.</li>
                            </ul>
                        </div>
                        
                        <!-- Preguntas generadas por IA -->
                        <div id="questionsContainer" class="space-y-6">
                            <div class="text-center py-12 text-gray-500">
                                <i class="fas fa-file-alt text-4xl mb-4"></i>
                                <p>Configura los parámetros y haz clic en "Generar Examen con IA" para crear tu evaluación personalizada.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Panel de personalización IA -->
                <div class="bg-white rounded-xl shadow-md p-6 mt-6">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Personalización con IA</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="bg-blue-50 p-4 rounded-lg">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-user-graduate text-blue-500 mr-2"></i>
                                <h4 class="font-medium text-blue-800">Adaptar a estudiante específico</h4>
                            </div>
                            <p class="text-blue-700 text-sm">La IA ajustará la dificultad basándose en el historial de desempeño del estudiante.</p>
                            <select class="w-full mt-2 px-3 py-1 border border-blue-300 rounded text-sm">
                                <option>Seleccionar estudiante</option>
                                <option>Ana Rodríguez</option>
                                <option>Carlos Méndez</option>
                                <option>María González</option>
                            </select>
                        </div>
                        
                        <div class="bg-green-50 p-4 rounded-lg">
                            <div class="flex items-center mb-2">
                                <i class="fas fa-bullseye text-green-500 mr-2"></i>
                                <h4 class="font-medium text-green-800">Enfocar en debilidades</h4>
                            </div>
                            <p class="text-green-700 text-sm">Generar más preguntas sobre temas donde el estudiante ha tenido dificultades.</p>
                            <button class="w-full mt-2 bg-green-100 text-green-700 py-1 rounded text-sm hover:bg-green-200">
                                Activar modo refuerzo
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const generateExamBtn = document.getElementById('generateExamBtn');
            const questionsContainer = document.getElementById('questionsContainer');
            const saveExamBtn = document.getElementById('saveExamBtn');
            const exportExamBtn = document.getElementById('exportExamBtn');
            
            // Generar examen
            generateExamBtn.addEventListener('click', function() {
                const questionCount = document.getElementById('questionCount').value;
                const subject = document.getElementById('examSubject').value;
                const difficulty = document.getElementById('difficultyLevel').value;
                
                if (!subject) {
                    Swal.fire({
                        title: 'Falta información',
                        text: 'Por favor, selecciona una asignatura para generar el examen.',
                        icon: 'warning',
                        confirmButtonText: 'Entendido',
                        confirmButtonColor: '#3b82f6'
                    });
                    return;
                }
                
                // Mostrar carga
                Swal.fire({
                    title: 'Generando examen con IA',
                    text: 'Analizando materiales y creando preguntas personalizadas...',
                    icon: 'info',
                    showConfirmButton: false,
                    allowOutsideClick: false
                });
                
                // Simular proceso de generación
                setTimeout(() => {
                    Swal.close();
                    renderGeneratedExam(questionCount, subject, difficulty);
                    
                    Swal.fire({
                        title: '¡Examen generado!',
                        text: `Se han creado ${questionCount} preguntas personalizadas usando IA.`,
                        icon: 'success',
                        confirmButtonText: 'Continuar',
                        confirmButtonColor: '#3b82f6'
                    });
                }, 2000);
            });
            
            // Renderizar examen generado
            function renderGeneratedExam(count, subject, difficulty) {
                questionsContainer.innerHTML = '';
                
                for (let i = 1; i <= count; i++) {
                    const questionElement = document.createElement('div');
                    questionElement.className = 'border border-gray-200 rounded-lg p-4';
                    
                    // Tipos de preguntas aleatorias
                    const questionTypes = ['multiple', 'trueFalse'];
                    const type = questionTypes[Math.floor(Math.random() * questionTypes.length)];
                    
                    if (type === 'multiple') {
                        questionElement.innerHTML = `
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-medium text-gray-800">Pregunta ${i}</h4>
                                <span class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">2 puntos</span>
                            </div>
                            <p class="text-gray-700 mb-4">${getRandomQuestion(subject)}</p>
                            <div class="space-y-2">
                                <div class="flex items-center">
                                    <input type="radio" name="q${i}" id="q${i}a" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300">
                                    <label for="q${i}a" class="ml-2 text-sm text-gray-700">${getRandomOption()}</label>
                                </div>
                                <div class="flex items-center">
                                    <input type="radio" name="q${i}" id="q${i}b" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300">
                                    <label for="q${i}b" class="ml-2 text-sm text-gray-700">${getRandomOption()}</label>
                                </div>
                                <div class="flex items-center">
                                    <input type="radio" name="q${i}" id="q${i}c" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300">
                                    <label for="q${i}c" class="ml-2 text-sm text-gray-700">${getRandomOption()}</label>
                                </div>
                                <div class="flex items-center">
                                    <input type="radio" name="q${i}" id="q${i}d" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300">
                                    <label for="q${i}d" class="ml-2 text-sm text-gray-700">${getRandomOption()}</label>
                                </div>
                            </div>
                        `;
                    } else {
                        questionElement.innerHTML = `
                            <div class="flex justify-between items-start mb-2">
                                <h4 class="font-medium text-gray-800">Pregunta ${i}</h4>
                                <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">1 punto</span>
                            </div>
                            <p class="text-gray-700 mb-4">${getRandomStatement(subject)}</p>
                            <div class="flex space-x-4">
                                <div class="flex items-center">
                                    <input type="radio" name="q${i}" id="q${i}true" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300">
                                    <label for="q${i}true" class="ml-2 text-sm text-gray-700">Verdadero</label>
                                </div>
                                <div class="flex items-center">
                                    <input type="radio" name="q${i}" id="q${i}false" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300">
                                    <label for="q${i}false" class="ml-2 text-sm text-gray-700">Falso</label>
                                </div>
                            </div>
                        `;
                    }
                    
                    questionsContainer.appendChild(questionElement);
                }
            }
            
            // Funciones auxiliares para generar contenido
            function getRandomQuestion(subject) {
                const mathQuestions = [
                    "¿Cuál es el resultado de (3x + 5) cuando x = 2?",
                    "Calcula el área de un triángulo con base 8cm y altura 5cm.",
                    "Resuelve la ecuación: 2x - 7 = 15",
                    "¿Cuál es el valor de π redondeado a dos decimales?",
                    "Simplifica la expresión: 3(a + 2b) - 2(2a - b)"
                ];
                
                const scienceQuestions = [
                    "¿Qué gas es esencial para la respiración de la mayoría de los seres vivos?",
                    "Explica brevemente el proceso de fotosíntesis.",
                    "¿Cuál es el planeta más grande del sistema solar?",
                    "¿Qué partícula subatómica tiene carga positiva?"
                ];
                
                const historyQuestions = [
                    "¿En qué año comenzó la Segunda Guerra Mundial?",
                    "Menciona dos causas principales de la Revolución Francesa.",
                    "¿Qué civilización construyó Machu Picchu?"
                ];
                
                const questions = {
                    'matematicas': mathQuestions,
                    'ciencias': scienceQuestions,
                    'historia': historyQuestions,
                    'lenguaje': ["Identifica el sujeto en la siguiente oración...", "¿Qué figura literaria se utiliza en...?"],
                    'programacion': ["¿Qué significa HTML?", "Explica el concepto de variable en programación."]
                };
                
                const subjectQuestions = questions[subject] || mathQuestions;
                return subjectQuestions[Math.floor(Math.random() * subjectQuestions.length)];
            }
            
            function getRandomStatement(subject) {
                const mathStatements = [
                    "El número π es un número racional.",
                    "La suma de los ángulos internos de un triángulo es 180 grados.",
                    "Un cuadrado es un tipo de rectángulo."
                ];
                
                const scienceStatements = [
                    "El agua hierve a 100°C a nivel del mar.",
                    "Los humanos tienen 206 huesos en su cuerpo.",
                    "La luz viaja más rápido que el sonido."
                ];
                
                const statements = {
                    'matematicas': mathStatements,
                    'ciencias': scienceStatements,
                    'historia': ["La Revolución Industrial comenzó en Francia.", "Colón descubrió América en 1492."],
                    'lenguaje': ["Un sustantivo es una acción.", "Los adjetivos califican a los sustantivos."],
                    'programacion': ["Java y JavaScript son el mismo lenguaje.", "Python es un lenguaje interpretado."]
                };
                
                const subjectStatements = statements[subject] || mathStatements;
                return subjectStatements[Math.floor(Math.random() * subjectStatements.length)];
            }
            
            function getRandomOption() {
                const options = [
                    "15 unidades cuadradas",
                    "x = 11",
                    "12.5 cm",
                    "42",
                    "Oxígeno",
                    "Plutón",
                    "Protón",
                    "1789",
                    "Los incas"
                ];
                return options[Math.floor(Math.random() * options.length)];
            }
            
            // Guardar examen
            saveExamBtn.addEventListener('click', function() {
                Swal.fire({
                    title: 'Examen guardado',
                    text: 'El examen ha sido guardado en tu biblioteca de evaluaciones.',
                    icon: 'success',
                    confirmButtonText: 'Continuar',
                    confirmButtonColor: '#3b82f6'
                });
            });
            
            // Exportar examen
            exportExamBtn.addEventListener('click', function() {
                Swal.fire({
                    title: 'Exportando examen',
                    text: 'Generando archivo PDF...',
                    icon: 'info',
                    showConfirmButton: false,
                    allowOutsideClick: false
                });
                
                setTimeout(() => {
                    Swal.fire({
                        title: 'PDF generado',
                        text: 'El examen ha sido exportado correctamente.',
                        icon: 'success',
                        confirmButtonText: 'Descargar',
                        confirmButtonColor: '#3b82f6'
                    });
                }, 1500);
            });
        });
    </script>
</body>
</html>